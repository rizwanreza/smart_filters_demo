<h1>Listing address_books</h1>

<%
if params[:criteria] && params[:name]
  if params[:criteria] == "contains"
    @address_books = AddressBook.find(:all, :conditions => ['name LIKE ?', "%#{params[:name]}%"])
  end

  if params[:criteria] == "not_contain"
    @address_books = AddressBook.find(:all, :conditions => ['name NOT LIKE ?', "%#{params[:name]}%"])
  end

  if params[:criteria] == "is"
    @address_books = AddressBook.find(:all, :conditions => ['name = ?', "#{params[:name]}"])
  end
end
%>

<div id="name-smart-field">

  <form action="/address_books" method="get" accept-charset="utf-8">
    <select name="criteria" id="criteria">
      <option value="contains">Contains</option>
      <option value="not_contain">Does not contain</option>
      <option value="is">is</option>
    </select>
    
    <label for="name">Name</label>
    <input type="text" name="name" value="" id="name">
    <input type="submit" value="Continue &rarr;">
  </form>
</div>

<table>
  <tr>
    <th>Name</th>
    <th>Address</th>
    <th>Company</th>
    <th>Email</th>
    <th>Phone</th>
    <th>Domain</th>
  </tr>

<% @address_books.each do |address_book| %>
  <tr>
    <td><%=h address_book.name %></td>
    <td><%=h address_book.address %></td>
    <td><%=h address_book.company %></td>
    <td><%=h address_book.email %></td>
    <td><%=h address_book.phone %></td>
    <td><%=h address_book.domain %></td>
    <td><%= link_to 'Show', address_book %></td>
    <td><%= link_to 'Edit', edit_address_book_path(address_book) %></td>
    <td><%= link_to 'Destroy', address_book, :confirm => 'Are you sure?', :method => :delete %></td>
  </tr>
<% end %>
</table>

<br />

<%= link_to 'New address_book', new_address_book_path %>